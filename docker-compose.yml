version: '3.8'

services:
  app:
    build:
      context: ./app
      dockerfile: Dockerfile
    ports:
      - "3000:3000"  # L'application sera expos√©e sur le port 3000
    depends_on:
      - storage
    volumes:
      - ./app:/workspace:cached
      - /workspace/node_modules
    networks:
      - app-network

  storage:
    build:
      context: ./nginx
      dockerfile: Dockerfile
    container_name: storage-nginx
    ports:
      - "8080:8080"  # Expose le port 80 pour NGINX
    volumes:
      - ./storage_data:/var/www/storage  # Volume pour les fichiers
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
